---
interface Props {
  title?: string;
  description?: string;
}

const {
  title = "HighlandXR",
  description = "Connecting XR events, talent, and funding across the Scottish Highlands."
} = Astro.props;

const pageTitle = `${title} | HighlandXR`;
const pathname = Astro.url.pathname;
const currentYear = new Date().getFullYear();

const navItems = [
  { href: "/", label: "Home" },
  { href: "/events", label: "Events" },
  { href: "/directory", label: "Directory" },
  { href: "/funding", label: "Funding" }
];

const isActive = (href: string) => {
  if (href === "/") return pathname === "/";
  return pathname.startsWith(href);
};
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="alternate" type="application/rss+xml" title="HighlandXR Events RSS" href="/rss.xml" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,600;9..144,700&family=Manrope:wght@400;500;600;700&display=swap"
    />
    <title>{pageTitle}</title>
  </head>
  <body>
    <a class="skip-link" href="#main-content">Skip to content</a>
    <div class="site-shell">
      <header class="site-header">
        <div class="container header-inner">
          <a href="/" class="brand" aria-label="HighlandXR home">
            <span class="brand-mark" aria-hidden="true"></span>
            <span>HighlandXR</span>
          </a>

          <nav class="site-nav" aria-label="Main">
            <ul class="nav-list">
              {
                navItems.map((item) => (
                  <li>
                    <a
                      href={item.href}
                      class={isActive(item.href) ? "active" : undefined}
                      aria-current={isActive(item.href) ? "page" : undefined}
                    >
                      {item.label}
                    </a>
                  </li>
                ))
              }
            </ul>
          </nav>

          <a
            href="/submit"
            class={`btn btn--primary header-cta ${pathname.startsWith("/submit") ? "active" : ""}`.trim()}
            aria-current={pathname.startsWith("/submit") ? "page" : undefined}
          >
            Submit
          </a>
        </div>
      </header>

      <main id="main-content" class="container site-main">
        <slot />
      </main>

      <footer class="site-footer">
        <div class="container footer-grid">
          <section>
            <h2 class="footer-title">HighlandXR</h2>
            <p class="footer-copy">
              Connecting XR studios, educators, and communities across the Scottish Highlands.
            </p>
          </section>

          <nav aria-label="Footer">
            <p class="footer-heading">Explore</p>
            <ul class="footer-links">
              <li><a href="/events">Events</a></li>
              <li><a href="/directory">Directory</a></li>
              <li><a href="/funding">Funding</a></li>
              <li><a href="/submit">Submit</a></li>
              <li><a href="/rss.xml">Events RSS</a></li>
            </ul>
          </nav>

          <section>
            <p class="footer-heading">Social</p>
            <ul class="footer-links">
              <li><a href="#" aria-label="LinkedIn placeholder">LinkedIn</a></li>
              <li><a href="#" aria-label="X placeholder">X</a></li>
              <li><a href="#" aria-label="GitHub placeholder">GitHub</a></li>
            </ul>
          </section>

          <section class="footer-cta">
            <p class="footer-heading">Share with the network</p>
            <p class="footer-copy">Have an event or opportunity to publish?</p>
            <a class="btn btn--ghost" href="/submit">Submit an Event</a>
          </section>
        </div>

        <div class="container footer-legal">
          <p>Copyright {currentYear} HighlandXR</p>
        </div>
      </footer>
    </div>
  </body>
</html>

<style is:global>
  :root {
    --color-bg: #f2f6f7;
    --color-bg-alt: #e9f0f2;
    --color-surface: #ffffff;
    --color-surface-alt: #f7fafb;
    --color-ink: #12242d;
    --color-ink-strong: #0b1820;
    --color-muted: #405a66;
    --color-line: #bfd0d6;
    --color-brand: #2c6558;
    --color-accent: #58d1c8;
    --color-accent-soft: rgba(88, 209, 200, 0.18);
    --color-hero: #13212b;
    --color-hero-deep: #0f1a24;
    --space-1: 0.25rem;
    --space-2: 0.5rem;
    --space-3: 0.75rem;
    --space-4: 1rem;
    --space-5: 1.5rem;
    --space-6: 2rem;
    --space-7: 2.5rem;
    --space-8: 3rem;
    --radius-sm: 10px;
    --radius-md: 16px;
    --radius-lg: 24px;
    --shadow-soft: 0 16px 38px rgba(14, 33, 40, 0.08);
    --shadow-focus: 0 0 0 3px rgba(88, 209, 200, 0.28);
    --container-width: 1120px;
  }

  * {
    box-sizing: border-box;
  }

  html {
    scroll-behavior: smooth;
  }

  body {
    margin: 0;
    font-family: "Manrope", "Segoe UI", sans-serif;
    color: var(--color-ink);
    background:
      radial-gradient(95rem 45rem at 8% -18%, rgba(85, 123, 114, 0.2), transparent 62%),
      radial-gradient(82rem 48rem at 90% -24%, rgba(98, 137, 166, 0.15), transparent 60%),
      linear-gradient(180deg, var(--color-bg), #edf3f6 58%, #eaf1f4 100%);
    min-height: 100vh;
    line-height: 1.55;
  }

  img,
  svg {
    max-width: 100%;
    height: auto;
  }

  a {
    color: var(--color-brand);
    text-decoration-thickness: 1px;
    text-underline-offset: 3px;
  }

  a:hover {
    text-decoration-thickness: 2px;
  }

  .site-shell {
    min-height: 100vh;
    display: grid;
    grid-template-rows: auto 1fr auto;
  }

  .container {
    width: min(var(--container-width), 92vw);
    margin: 0 auto;
  }

  .skip-link {
    position: absolute;
    left: var(--space-3);
    top: -42px;
    z-index: 60;
    background: #ffffff;
    color: var(--color-ink);
    border: 1px solid var(--color-line);
    border-radius: var(--radius-sm);
    padding: var(--space-2) var(--space-3);
    text-decoration: none;
    transition: top 140ms ease;
  }

  .skip-link:focus {
    top: var(--space-3);
  }

  .site-header {
    position: sticky;
    top: 0;
    z-index: 40;
    border-bottom: 1px solid rgba(11, 26, 35, 0.08);
    background: rgba(242, 246, 247, 0.86);
    backdrop-filter: blur(10px);
  }

  .header-inner {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--space-4);
    padding: 0.84rem 0;
  }

  .brand {
    display: inline-flex;
    align-items: center;
    gap: var(--space-2);
    text-decoration: none;
    color: var(--color-ink-strong);
    font-family: "Fraunces", Georgia, serif;
    font-size: 1.24rem;
    letter-spacing: 0.02em;
  }

  .brand-mark {
    width: 1.1rem;
    height: 1.1rem;
    border-radius: 50%;
    background:
      radial-gradient(circle at 30% 30%, #8defe7, transparent 50%),
      linear-gradient(130deg, #2c6558, #1e4650);
    box-shadow: 0 0 0 2px rgba(18, 36, 45, 0.08);
  }

  .site-nav {
    margin-left: auto;
  }

  .nav-list {
    list-style: none;
    margin: 0;
    padding: 0;
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-1);
  }

  .nav-list a {
    display: inline-block;
    text-decoration: none;
    color: var(--color-muted);
    border: 1px solid transparent;
    border-radius: 999px;
    padding: 0.4rem 0.8rem;
    font-size: 0.96rem;
    font-weight: 600;
    transition: border-color 160ms ease, background-color 160ms ease, color 160ms ease;
  }

  .nav-list a:hover {
    color: var(--color-ink);
    border-color: rgba(18, 36, 45, 0.15);
    background: var(--color-surface);
  }

  .nav-list a.active {
    color: var(--color-ink);
    border-color: rgba(18, 36, 45, 0.18);
    background: var(--color-accent-soft);
  }

  .site-main {
    padding: var(--space-6) 0 var(--space-8);
  }

  h1,
  h2,
  h3,
  h4 {
    margin: 0;
    color: var(--color-ink-strong);
    line-height: 1.2;
    font-family: "Fraunces", Georgia, serif;
  }

  h1 {
    font-size: clamp(2rem, 4vw, 3.15rem);
  }

  h2 {
    font-size: clamp(1.45rem, 2.2vw, 2rem);
  }

  h3 {
    font-size: clamp(1.1rem, 1.7vw, 1.42rem);
  }

  p {
    margin: 0;
  }

  .lead {
    color: var(--color-muted);
    max-width: 65ch;
  }

  .section-stack {
    margin-top: var(--space-8);
  }

  .surface {
    background: var(--color-surface);
    border: 1px solid var(--color-line);
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-soft);
  }

  .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-2);
    border-radius: 999px;
    border: 1px solid transparent;
    text-decoration: none;
    font-weight: 700;
    font-size: 0.95rem;
    padding: 0.57rem 1rem;
    transition:
      transform 120ms ease,
      box-shadow 160ms ease,
      border-color 160ms ease,
      background-color 160ms ease,
      color 160ms ease;
  }

  .btn:hover {
    transform: translateY(-1px);
    text-decoration: none;
  }

  .btn:active {
    transform: translateY(0);
  }

  .btn--primary {
    background: linear-gradient(120deg, #2b6257, #366e62);
    color: #f5fbfb;
    border-color: rgba(20, 54, 49, 0.65);
  }

  .btn--primary:hover {
    background: linear-gradient(120deg, #285a51, #325f59);
  }

  .btn--ghost {
    background: rgba(255, 255, 255, 0.62);
    color: var(--color-ink);
    border-color: rgba(18, 36, 45, 0.2);
  }

  .btn--ghost:hover {
    background: #ffffff;
  }

  .header-cta {
    white-space: nowrap;
  }

  .header-cta.active {
    box-shadow: inset 0 0 0 999px rgba(88, 209, 200, 0.12);
  }

  .section-heading {
    display: grid;
    gap: var(--space-2);
    margin-bottom: var(--space-4);
  }

  .section-heading--center {
    text-align: center;
    justify-items: center;
  }

  .section-heading__kicker {
    margin: 0;
    font-size: 0.76rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.12em;
    color: var(--color-muted);
  }

  .section-heading__title {
    margin: 0;
  }

  .section-heading__description {
    margin: 0;
    max-width: 65ch;
    color: var(--color-muted);
  }

  .card {
    display: grid;
    gap: var(--space-3);
    padding: var(--space-5);
    background: linear-gradient(180deg, #ffffff, #f8fbfc 100%);
    border: 1px solid var(--color-line);
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-soft);
  }

  .card--hover {
    transition:
      transform 180ms ease,
      box-shadow 180ms ease,
      border-color 180ms ease;
  }

  .card--hover:hover {
    transform: translateY(-2px);
    border-color: rgba(30, 68, 76, 0.25);
    box-shadow: 0 20px 35px rgba(13, 32, 39, 0.12);
  }

  .card__eyebrow {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-2);
    align-items: center;
  }

  .card__title {
    margin: 0;
    line-height: 1.25;
  }

  .card__title-link {
    color: inherit;
    text-decoration: none;
  }

  .card__title-link:hover {
    text-decoration: underline;
    text-decoration-thickness: 1px;
  }

  .card__body {
    display: grid;
    gap: var(--space-3);
  }

  .card__footer {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-3);
    align-items: center;
  }

  .badge {
    display: inline-flex;
    align-items: center;
    border-radius: 999px;
    border: 1px solid rgba(18, 36, 45, 0.16);
    background: rgba(255, 255, 255, 0.7);
    color: var(--color-ink);
    padding: 0.2rem 0.58rem;
    font-size: 0.76rem;
    font-weight: 700;
    letter-spacing: 0.02em;
  }

  .badge--accent {
    border-color: rgba(23, 95, 111, 0.35);
    background: rgba(88, 209, 200, 0.16);
  }

  .badge--success {
    border-color: rgba(44, 101, 88, 0.33);
    background: rgba(44, 101, 88, 0.16);
  }

  .badge--warning {
    border-color: rgba(110, 87, 40, 0.35);
    background: rgba(232, 206, 131, 0.28);
  }

  .hero {
    position: relative;
    overflow: clip;
    padding: clamp(1.4rem, 3vw, 2.3rem);
    min-height: clamp(300px, 40vw, 380px);
    background: linear-gradient(140deg, var(--color-hero-deep), #162734 47%, #1d3a44 100%);
    border-color: rgba(132, 165, 184, 0.28);
    color: #ecf5fa;
    display: grid;
    align-items: center;
  }

  .hero h1 {
    color: #f0f7fb;
  }

  .hero__glow,
  .hero__lines {
    position: absolute;
    inset: 0;
    pointer-events: none;
  }

  .hero__glow {
    background:
      radial-gradient(45rem 24rem at 80% 14%, rgba(88, 209, 200, 0.24), transparent 62%),
      radial-gradient(26rem 18rem at 20% 86%, rgba(80, 128, 116, 0.24), transparent 64%);
  }

  .hero__lines {
    opacity: 0.42;
    background-image:
      repeating-radial-gradient(
        circle at 88% 6%,
        rgba(212, 237, 240, 0.31) 0 1px,
        transparent 1px 14px
      ),
      repeating-radial-gradient(
        circle at 16% 92%,
        rgba(180, 223, 215, 0.22) 0 1px,
        transparent 1px 16px
      );
  }

  .hero__content {
    position: relative;
    z-index: 1;
    display: grid;
    gap: var(--space-4);
    max-width: 46rem;
  }

  .hero__kicker {
    margin: 0;
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.13em;
    font-weight: 700;
    color: #c4dbe7;
  }

  .hero__description {
    margin: 0;
    max-width: 56ch;
    color: #d8e7ef;
  }

  .hero__actions {
    display: flex;
    gap: var(--space-3);
    flex-wrap: wrap;
  }

  .hero .btn--ghost {
    background: rgba(14, 31, 39, 0.22);
    border-color: rgba(212, 233, 241, 0.35);
    color: #eaf5fa;
  }

  .hero .btn--ghost:hover {
    background: rgba(14, 31, 39, 0.38);
  }

  .hero__meta {
    margin-top: var(--space-2);
  }

  .stat-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: var(--space-4);
  }

  .stat-card {
    gap: var(--space-2);
    padding: var(--space-4);
    border-color: rgba(71, 101, 114, 0.24);
    background: linear-gradient(180deg, #ffffff 0%, #f6f9fb 100%);
  }

  .stat-card__eyebrow {
    display: inline-flex;
    align-items: center;
    gap: var(--space-2);
    color: var(--color-muted);
    font-size: 0.84rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.06em;
  }

  .stat-card__icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border-radius: 999px;
    width: 2rem;
    height: 2rem;
    border: 1px solid rgba(18, 36, 45, 0.2);
    background: rgba(88, 209, 200, 0.14);
    color: var(--color-ink);
  }

  .stat-card__icon svg {
    width: 1rem;
    height: 1rem;
  }

  .stat-card__value {
    font-family: "Fraunces", Georgia, serif;
    color: var(--color-ink-strong);
    font-size: clamp(1.95rem, 4.8vw, 2.5rem);
    line-height: 1;
  }

  .stat-card__description {
    color: var(--color-muted);
    font-size: 0.95rem;
    margin-top: var(--space-1);
  }

  .empty-state {
    display: grid;
    gap: var(--space-3);
    padding: var(--space-5);
  }

  .empty-state__kicker {
    margin: 0;
    font-size: 0.76rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--color-muted);
  }

  .empty-state p {
    color: var(--color-muted);
  }

  .meta {
    color: var(--color-muted);
    font-size: 0.94rem;
  }

  .site-footer {
    border-top: 1px solid rgba(17, 35, 43, 0.12);
    background: linear-gradient(180deg, rgba(248, 251, 252, 0.92), rgba(236, 243, 246, 0.98));
    margin-top: var(--space-7);
  }

  .footer-grid {
    padding: var(--space-7) 0 var(--space-5);
    display: grid;
    gap: var(--space-5);
    grid-template-columns: 1.2fr repeat(2, minmax(160px, 0.7fr)) 1fr;
  }

  .footer-title {
    margin: 0 0 var(--space-2);
    font-size: 1.2rem;
  }

  .footer-copy {
    color: var(--color-muted);
    max-width: 38ch;
    margin: 0;
  }

  .footer-heading {
    margin: 0 0 var(--space-2);
    font-size: 0.92rem;
    font-weight: 700;
    color: var(--color-ink);
  }

  .footer-links {
    list-style: none;
    margin: 0;
    padding: 0;
    display: grid;
    gap: var(--space-2);
  }

  .footer-links a {
    color: var(--color-muted);
    text-decoration: none;
  }

  .footer-links a:hover {
    color: var(--color-ink);
    text-decoration: underline;
  }

  .footer-cta {
    display: grid;
    gap: var(--space-3);
    align-content: start;
    padding: var(--space-4);
    border: 1px solid rgba(18, 36, 45, 0.14);
    border-radius: var(--radius-md);
    background: linear-gradient(180deg, #ffffff, #f4f9fb);
  }

  .footer-legal {
    border-top: 1px solid rgba(17, 35, 43, 0.1);
    padding: var(--space-3) 0 var(--space-5);
  }

  .footer-legal p {
    margin: 0;
    color: var(--color-muted);
    font-size: 0.88rem;
  }

  :where(a, button, input, select, textarea):focus-visible {
    outline: none;
    box-shadow: var(--shadow-focus);
    border-color: rgba(88, 209, 200, 0.58);
  }

  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation: none !important;
      transition: none !important;
      scroll-behavior: auto !important;
    }
  }

  @media (max-width: 980px) {
    .header-inner {
      flex-wrap: wrap;
      justify-content: flex-start;
    }

    .site-nav {
      order: 3;
      width: 100%;
      margin-left: 0;
    }

    .footer-grid {
      grid-template-columns: repeat(2, minmax(220px, 1fr));
    }
  }

  @media (max-width: 700px) {
    .site-main {
      padding-top: var(--space-5);
      padding-bottom: var(--space-7);
    }

    .btn {
      width: fit-content;
    }

    .header-cta {
      margin-left: auto;
    }

    .nav-list {
      gap: 0.35rem;
    }

    .nav-list a {
      font-size: 0.92rem;
      padding: 0.36rem 0.68rem;
    }

    .footer-grid {
      grid-template-columns: 1fr;
    }
  }
</style>
